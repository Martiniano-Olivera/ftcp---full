<div *ngIf="!enviado; else enviadoTpl">
  <form (ngSubmit)="enviar()" #form="ngForm" novalidate>
    <label>
      Nombre:
      <input type="text" name="nombre" [(ngModel)]="nombre" required />
    </label>
    <label>
      Teléfono:
      <input
        type="tel"
        name="telefono"
        [(ngModel)]="telefono"
        required
        pattern="\d{6,20}"
      />
    </label>
    <label>
      Archivos:
      <input
        type="file"
        accept="application/pdf"
        (change)="onFileChange($event)"
        multiple
        required
      />
    </label>
    <ul>
      <li *ngFor="let f of archivos">
        {{ f.name }} ({{ f.size / 1024 / 1024 | number: '1.1-1' }} MB)
      </li>
    </ul>
    <div *ngFor="let err of fileErrors" class="error">{{ err }}</div>
    <div *ngIf="errorMsg" class="error">{{ errorMsg }}</div>
    <button
      type="submit"
      [disabled]="form.invalid || archivos.length === 0 || fileErrors.length > 0 || loading"
    >
      <span *ngIf="!loading">Enviar pedido</span>
      <span *ngIf="loading">Enviando...</span>
    </button>
  </form>
</div>
<ng-template #enviadoTpl>
  <p>¡Pedido enviado! ID: {{ pedidoId }}</p>
</ng-template>
