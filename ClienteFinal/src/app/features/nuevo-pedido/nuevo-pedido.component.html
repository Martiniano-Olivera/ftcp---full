<div *ngIf="!enviado; else enviadoTpl">
  <form (ngSubmit)="enviar()" #form="ngForm">
    <label>
      Nombre:
      <input type="text" name="nombre" [(ngModel)]="nombre" required />
    </label>
    <label>
      Teléfono:
      <input
        type="tel"
        name="telefono"
        [(ngModel)]="telefono"
        required
        pattern="\d{6,20}"
      />
    </label>
    <label>
      Archivos:
      <input
        type="file"
        accept="application/pdf"
        (change)="onFileChange($event)"
        multiple
      />
    </label>
    <ul>
      <li *ngFor="let f of archivos">{{ f.name }} ({{ formatSize(f.size) }})</li>
    </ul>
    <div class="error" *ngFor="let err of fileErrors">{{ err }}</div>
    <div class="error" *ngIf="errorMsg">{{ errorMsg }}</div>
    <button
      type="submit"
      [disabled]="
        loading || !form.form.valid || archivos.length === 0 || fileErrors.length > 0
      "
    >
      {{ loading ? 'Enviando...' : 'Enviar pedido' }}
    </button>
  </form>
</div>
<ng-template #enviadoTpl>
  <p>
    ¡Pedido enviado! Número: {{ pedidoId }}
  </p>
  <button (click)="reset()">Nuevo pedido</button>
</ng-template>
