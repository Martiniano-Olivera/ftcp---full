<div *ngIf="!enviado; else enviadoTpl">
  <form (ngSubmit)="enviar()" #form="ngForm">
    <label>
      Nombre:
      <input type="text" name="nombre" [(ngModel)]="nombre" required />
    </label>
    <label>
      Teléfono:
      <input type="tel" name="telefono" [(ngModel)]="telefono" required pattern="\d{6,20}" />
    </label>
    <label>
      Archivos:
      <app-file-upload
        [archivos]="archivosMeta"
        (archivoAgregado)="onArchivoAgregado($event)"
        (archivoEliminado)="onArchivoEliminado($event)"
        (filesSelected)="onFilesSelected($event)"
      ></app-file-upload>
    </label>
    <p *ngIf="error" class="error">{{ error }}</p>
    <button type="submit" [disabled]="form.invalid || archivos.length === 0 || loading">
      {{ loading ? 'Enviando...' : 'Enviar pedido' }}
    </button>
  </form>
</div>
<ng-template #enviadoTpl>
  <p>¡Pedido enviado! ID: {{ orderId }}</p>
</ng-template>
